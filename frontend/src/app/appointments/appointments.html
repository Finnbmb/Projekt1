<!-- Modern Header -->
<div class="appointments-header">
  <div class="header-content">
    <div class="header-left">
      <button mat-icon-button (click)="goBack()" class="back-btn">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <div class="header-title">
        <div class="title-icon">
          <mat-icon>event_note</mat-icon>
        </div>
        <div>
          <h1>Terminverwaltung</h1>
          <p class="subtitle">Verwalten Sie Ihre Termine und Appointments</p>
        </div>
      </div>
    </div>
    <div class="header-actions">
      <button mat-raised-button (click)="openCreateDialog()" class="create-btn">
        <mat-icon>add</mat-icon>
        Neuer Termin
      </button>
    </div>
  </div>
</div>

<div class="appointments-container">
  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading()">
    <mat-spinner></mat-spinner>
    <p>Termine werden geladen...</p>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading() && appointments().length === 0">
    <div class="empty-icon">
      <mat-icon>event_busy</mat-icon>
    </div>
    <h3>Keine Termine vorhanden</h3>
    <p>Erstellen Sie Ihren ersten Termin und beginnen Sie mit der Terminplanung!</p>
    <button mat-raised-button (click)="openCreateDialog()" class="create-first-btn">
      <mat-icon>add</mat-icon>
      Ersten Termin erstellen
    </button>
  </div>

  <!-- Appointments Grid -->
  <div class="appointments-grid" *ngIf="!isLoading() && appointments().length > 0">
    <div *ngFor="let appointment of appointments()" class="appointment-card" (click)="editAppointment(appointment)">
      <div class="card-header">
        <div class="appointment-title">{{ appointment.title }}</div>
        <div class="priority-indicator" [class]="'priority-' + appointment.priority"></div>
      </div>
      
      <div class="card-content">
        <div class="appointment-time">
          <mat-icon>schedule</mat-icon>
          <span>{{ formatDateTime(appointment.startDateTime) }} - {{ formatTime(appointment.endDateTime) }}</span>
        </div>
        
        <div class="appointment-description" *ngIf="appointment.description">
          {{ appointment.description }}
        </div>
        
        <div class="appointment-location" *ngIf="appointment.location">
          <mat-icon>location_on</mat-icon>
          <span>{{ appointment.location }}</span>
        </div>
        
        <div class="appointment-priority">
          <mat-chip [class]="'priority-chip-' + appointment.priority">
            {{ getPriorityLabel(appointment.priority) }}
          </mat-chip>
        </div>
      </div>
      
      <div class="card-actions" (click)="$event.stopPropagation()">
        <button mat-icon-button (click)="editAppointment(appointment)" class="edit-btn">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button (click)="deleteAppointment(appointment)" class="delete-btn">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>
